<!DOCTYPE html>
<html>


<head>
<link rel="preconnect" href="https://fonts.gstatic.com">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Varela+Round&display=swap" >
  <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">
  <title>Standup NLP</title>
</head>
<script src="bootstrap-autocomplete.min.js"></script>

<body>
    {% include 'nav.html' %}
</body>
<div class="center">
<h1>Make a Word Cloud</h1>

<input type='number' id="threshold" method="post" step='1' min='0' max='250'
                        value="{{default_threshold}}"></input>
<br>
<select class="form-control basicAutoSelect" name="simple_select"
    placeholder="Type to search for a comic!" autocomplete="off" id='name'>
    {%for n in names%}
    <option value={{n}}>{{n.title()}}</option>
    {%endfor%}
</select>
<button type="button" class="btn btn-primary" id='submit'>Generate Word Cloud</button>

</div>

<br>
      <span id="word_cloud"></span>

<script>
    'use strict';

    function handleResponse(response) {
    $('#word_cloud').html(response);
    }

    let requestRecs = null;

    function getResults() {
    let url = '/makeWordCloud';

    let data = {};
    data['name'] = $('#name').val()
    data['threshold'] = $('#threshold').val()

    if (requestRecs != null)
        requestRecs.abort();

    requestRecs = $.ajax(
        {
        type: 'POST',
        url: url,
        data: data,
        success: handleResponse
        }
    );
    }

    function setup() {
    $('#submit').focus();
    $('#submit').on('input', getResults);
    }

    $('document').ready(setup);
</script>

</html>